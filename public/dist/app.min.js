!function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return n(r?r:e)},l,l.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t){t.exports=function(t){t.controller("HomeController",["$scope",e("./controllers/home.js")]),t.controller("RegisterController",["$scope",e("./controllers/register.js")]),t.controller("ProfileController",["$scope",e("./controllers/profile.js")]),t.controller("CreateCorpusController",["$scope",e("./controllers/createcorpus.js")])}},{"./controllers/createcorpus.js":5,"./controllers/home.js":6,"./controllers/profile.js":7,"./controllers/register.js":8}],2:[function(e,t){var r,i,n,o,s=e("../../modules/FacetsProcesser");t.exports=function(e,t,a){e.typeFilter=void 0,e.entityFilter=void 0,e.articleFilter=void 0,e.setFilter=function(t){switch(t.type){case"article":e.articleFilter=e.articleFilter===t.id?void 0:t.id;break;case"entity":e.entityFilter=e.entityFilter===t.id?void 0:t.id;break;case"type":e.typeFilter=e.typeFilter===t.id?void 0:t.id}},e.itemActive=function(t){switch(t.type){case"article":return e.articleFilter===t.id;case"entity":return e.entityFilter===t.id;case"type":return e.typeFilter===t.id}},e.facetFilter=function(t){var r=!1,i=!1,n=!1;switch(t.type){case"article":return i=void 0!==e.entityFilter?-1!==t.entities.indexOf(e.entityFilter):!0,n=void 0!==e.typeFilter?-1!==t.types.indexOf(e.typeFilter):!0,i&&n;case"entity":return r=void 0!==e.articleFilter?-1!==t.articles.indexOf(e.articleFilter):!0,n=void 0!==e.typeFilter?-1!==t.types.indexOf(e.typeFilter):!0,r&&n;case"type":return r=void 0!==e.articleFilter?-1!==t.articles.indexOf(e.articleFilter):!0,i=void 0!==e.entityFilter?-1!==t.entities.indexOf(e.entityFilter):!0,r&&i}},$.getJSON("/api/corpus/"+e.currentCorpus._id+"/facets",function(c){r=s.processData(c),i=r.types,n=r.entities,o=r.articles;for(var l=0;l<o.length;l++)o[l].sourceSafe=a.trustAsHtml(o[l].source);e.data=[{name:"Articles",values:o},{name:"Types",values:i},{name:"Entities",values:n}],t.reload()})}},{"../../modules/FacetsProcesser":15}],3:[function(e,t){var r=e("../../data/corpusextentions"),i={uri:function(){var e=this.input_type;return"twitter"===e?"http://twitter.com/"+this.input:"direct"===e?"-":this.input}};t.exports=function(e,t,n,o){i=_.extend(i,o.data),e.currentCorpus=i,e.extentions=r,e.$state=n,e.$on("$viewContentLoaded",function(){var e=t.path().split("/").length;3===e&&n.go("corpus."+r[0].name)})}},{"../../data/corpusextentions":10}],4:[function(e,t){t.exports=function(){console.log("corpus overview")}},{}],5:[function(e,t){var r=e("../data/corpusTypes.js"),i=e("../data/nlpApis.js");t.exports=function(e){e.corpusTypes=r,e.nlpApis=i,e.corpusSelection={index:0},e.currentCorpus=e.corpusTypes[0];var t,n,o=function(){console.log("view loaded!"),e.currentCorpus=e.corpusTypes[e.corpusSelection.index],e.currentCorpus.haveItems?(t?t.slider("destroy"):(n=$("#slider_container"),t=$("#input_count")),n.show(),t.slider({min:e.currentCorpus.itemsMin,max:e.currentCorpus.itemsMax,step:50,value:e.currentCorpus.itemsDefault,tooltip:"always"})):n.hide()};e.$watch("corpusSelection",o,!0),e.$on("$viewContentLoaded",o),e.startAnalysis=function(){var r=$("#input_item"),i=$("#input_item_area"),n=$("#input_item_file"),o=$("input#input_count"),s=$("#newcorpus_form"),a=$("input[name=input_type]:checked");r.parent().removeClass("has-warning");var c=null,l=e.currentCorpus.name,p=e.currentCorpus.inputType;switch(p){case"text":c=r.val().trim();break;case"textarea":c=i.val().trim();break;case"file":c=n.val()}if(!c)return void r.parent().addClass("has-warning");var u=t.slider("getValue");switch(o.val(u),p){case"text":r.attr("name","input"),i.remove(),n.remove();break;case"textarea":r.remove(),i.attr("name","input"),n.remove();break;case"file":r.remove(),i.remove(),n.attr("name","input")}a.val(l),s.submit()}}},{"../data/corpusTypes.js":9,"../data/nlpApis.js":11}],6:[function(e,t){t.exports=function(e){e.corpus="0",e.corpusSelect=function(){"0"!==e.corpus&&(window.location="/corpus/"+e.corpus)}}},{}],7:[function(e,t){t.exports=function(){}},{}],8:[function(e,t){t.exports=function(){}},{}],9:[function(e,t){var r=[];r.push({name:"feed",description:"RSS/RDF/ATOM Feed",inputType:"text",inputDescription:"URL of the RSS/RDF/ATOM feed",inputPlaceholder:"URL of your feed",haveItems:!0,itemsMin:50,itemsMax:600,itemsDefault:50}),r.push({name:"wordpress",description:"WordPress Blog",inputType:"text",inputDescription:"Weblog URL",inputPlaceholder:"URL of the blog",haveItems:!0,itemsMin:50,itemsMax:400,itemsDefault:400}),r.push({name:"blogger",description:"Blogger Blog",inputType:"text",inputDescription:"Weblog URL",inputPlaceholder:"URL of the blog",haveItems:!0,itemsMin:50,itemsMax:400,itemsDefault:400}),r.push({name:"twitter",description:"Public Twitter account",inputType:"text",inputDescription:"Twitter username",inputPlaceholder:"Username",haveItems:!0,itemsMin:200,itemsMax:1500,itemsDefault:1e3}),r.push({name:"slidewiki",description:"SlideWiki Deck",inputType:"text",inputDescription:"Deck ID",inputPlaceholder:"Deck ID",haveItems:!0,itemsMin:50,itemsMax:1e3,itemsDefault:400}),r.push({name:"webpage",description:"Web page",inputType:"text",inputDescription:"WebPage URL",inputPlaceholder:"URL",haveItems:!1}),r.push({name:"directinput",description:"Direct input",inputType:"textarea",inputDescription:"Your text/html",haveItems:!1}),r.push({name:"doc",description:"Upload a document",inputType:"file",inputDescription:"Document",haveItems:!1}),t.exports=r},{}],10:[function(e,t){var r=[];r.push({name:"Overview",path:"/overview",controller:"CorpusOverviewController",template:"/templates/corpusOverview.html",js:e("../controllers/corpus/overview.js")}),r.push({name:"Facets",path:"/facets",controller:"CorpusFacetsController",template:"/templates/corpusFacets.html",js:e("../controllers/corpus/facets.js")}),t.exports=r},{"../controllers/corpus/facets.js":2,"../controllers/corpus/overview.js":4}],11:[function(e,t){var r=[];r.push({id:"DBpedia-Spotlight",name:"DBpedia Spotlight"}),r.push({id:"FOX",name:"FOX"}),t.exports=r},{}],12:[function(e,t){t.exports=function(){}},{}],13:[function(e){var t=(e("./modules/corpus"),angular.module("context-app",["ngRoute","mgcrea.ngStrap","CorpusModule"]));e("./routes")(t),e("./services")(t),e("./controllers")(t),e("./directives")(t),e("./filters")(t)},{"./controllers":1,"./directives":12,"./filters":14,"./modules/corpus":16,"./routes":17,"./services":18}],14:[function(e,t){t.exports=function(){}},{}],15:[function(e,t,r){var i=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},n=function(e){var t=[],r=[],n=[],o=[],s=[];e.articles.forEach(function(e){var a="";try{var c=$(e.source);a=$("extracted-title",c).text()||c.text()}catch(l){a=e.source}a=a.slice(0,30)+"...";for(var p={id:e._id,name:a,type:"article",count:0,entities:[],types:[],source:e.source},u=S(e.source).stripTags().s,d=u.split(/\s/),f=e.source.split(/\s/),m=0;m<d.length;m++){var h=d[m];h=h.split("/"),d[m]=h}d=_.flatten(d);var v=function(e,t,r,n){n=n||-1;var o=f.indexOf(e,n);if(-1===o)for(var s=0;s<f.length;s++){var a=f[s],c=a.replace(/href="(.+?)"(.*?>?)/,"").replace(/src="(.+?)"(.*?>?)/,"").replace(/alt="(.+?)"(.*?>?)/,"");if(-1===c.indexOf("span%marked%")&&c.match(new RegExp(x+i(t)+g))&&s>=n){o=s;break}}return o},y=/(^[\W]+)|([\W]+$)/g,x="",g="(\\W?)";e.entities.forEach(function(e){var t=e.name.split(" ");if(1===t.length)d.forEach(function(t){{var r=t.replace(y,"");e.name.replace(y,"")}if(r!==e.name&&t!==e.name);else{var i=v(t,r,e.name);if(-1!==i){var n=f[i],o=n.match(/href="(.+?)"/),s=n.match(/src="(.+?)"/),a=n.match(/alt="(.+?)"/);o&&(o=o[1],n=n.replace(o,"%link%")),s&&(s=s[1],n=n.replace(s,"%img%")),a&&(a=a[1],n=n.replace(a,"%alt%")),f[i]=n.replace(e.name,'<span%marked% class="label label-warning hasTooltip" data-toggle="tooltip" title="'+e.types.join(" ")+'">'+e.name+"</span%marked%>"),o&&(f[i]=f[i].replace("%link%",o)),s&&(f[i]=f[i].replace("%img%",s)),a&&(f[i]=f[i].replace("%alt%",a))}}});else{var a=t[0],c=t[t.length-1];d.forEach(function(r,n){var o=r.replace(y,"");if(-1===o.indexOf("span%marked%")){var s=null!==a.match(new RegExp(x+i(o)+g));if(s){var l=0;for(l=1;l<t.length;l++)if(!(n+l>=d.length)){var p=d[n+l].replace(y,"");-1===p.indexOf("span%marked%")&&(s=s&&null!==t[l].match(new RegExp(x+i(p)+g)))}if(s){var u=v(r,o,a,n),m=n+t.length-1;if(m>=d.length)return;var h=d[m],w=h.replace(/[^\w]/,""),F=v(h,w,c,m);-1!==u&&-1!==F&&Math.abs(u-F)<5&&(f[u]=f[u].replace(new RegExp(i(a)+"$"),'<span%marked% class="label label-warning hasTooltip" data-toggle="tooltip" title="'+e.types.join(" ")+'">'+a),f[F]=f[F].replace(c,c+"</span%marked%>"))}}else;}})}var l,u=s.indexOf(e.name);-1!==u?(l=o[u],o[u].count+=1,-1===o[u].articles.indexOf(p.id)&&o[u].articles.push(p.id),-1===p.entities.indexOf(l.id)&&p.entities.push(l.id)):(l={id:e._id,name:e.name,type:"entity",count:1,articles:[p.id],types:[]},p.entities.push(l.id)),e.types.forEach(function(e){var t=e.split(":")[1],i="type_"+t,o=n.indexOf(t);-1!==o?(r[o].count+=1,r[o].entities.push(l.id),r[o].articles.push(p.id),-1===l.types.indexOf(i)&&l.types.push(i),-1===p.types.indexOf(i)&&p.types.push(i)):(r.push({id:i,name:t,type:"type",count:1,entities:[l.id],articles:[p.id]}),-1===l.types.indexOf(i)&&l.types.push("type_"+t),-1===p.types.indexOf(i)&&p.types.push("type_"+t),n.push(t))}),-1===u&&(o.push(l),s.push(l.name))}),e.source=f.join(" ").replace(/span%marked%/g,"span"),p.source=e.source,t.push(p)});var a=function(e,t){return t.count-e.count};return o=o.sort(a),r=r.sort(a),{articles:t,types:r,entities:o}};r.processData=n},{}],16:[function(e,t){var r=e("../data/corpusextentions"),i=angular.module("CorpusModule",["ui.router"]);i.config(function(t){t.state("corpus",{url:"/corpus/:id",controller:e("../controllers/corpus/main"),templateUrl:"/templates/corpusView.html",resolve:{corpus:["$http","$stateParams",function(e,t){return e({method:"GET",url:"/api/corpus/"+t.id})}]}}),r.forEach(function(e){t.state("corpus."+e.name,{url:e.path,templateUrl:e.template,controller:e.controller})})}),r.forEach(function(e){i.controller(e.controller,["$scope","$state","$sce",e.js])}),t.exports=i},{"../controllers/corpus/main":3,"../data/corpusextentions":10}],17:[function(e,t){t.exports=function(e){e.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{controller:"HomeController",template:""}),e.when("/auth",{controller:"LoginController",template:""}),e.when("/register",{controller:"RegisterController",template:""}),e.when("/createCorpus",{controller:"CreateCorpusController",templateUrl:"/templates/createCorpus.html"}),t.html5Mode(!0)}])}},{}],18:[function(e,t){t.exports=function(){}},{}]},{},[13]);